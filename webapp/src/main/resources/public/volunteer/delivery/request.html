<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./request.css">
  <link rel="stylesheet" href="../../style.css">
  <script src="./request.js"></script>
  <title>Delivery Request</title>
  {{> header-include }}
</head>
<body>
  {{> header }}
  <h1> Request Page </h1>

  <main style="display: flex; flex-direction: column; align-items: center">


      <div style="
                  padding: 1rem 1.5rem 1rem 1.5rem;
                  border: solid black;
                  border-radius: 20px;
                  background-color: #dddddd;
                  "
      id="verification-container">
        <form id="verificationForm" style="display: flex;
                    flex-direction: column;
                    gap: 1rem;
                    ">
          <div>
            <h1> Verification Required </h1>
            <span class="errorMessage hidden" id="verification-error-msg"> ** Verification Error: Phone number is not associated with delivery request </span>
          </div>
          <div>
            <div>
              <label for="phone-verification">Phone Number: </label>
              <input type="tel" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" id="phone-verification" name="userPhone" required/>
            </div>
            <label for="phone-verification" class="italic" style="font-size:small">Format: 111-222-3333 </label>
        </div>
        <div style="display: flex;  flex-direction: row-reverse">
          <button>
            Submit
          </button>
        </div>
      </form>
    </div>


    <div class="hidden" id="content" data-urlkey="{{urlKey}}">
      <h1> Verified! </h1>
    </div>
  </main>

</body>

<script>
  {{^userRequiresPhoneAuth}}
    console.log("Running script because the user does not require auth")
    window.addEventListener("load", () => {
      submitVerification({{userPhone}}, {{urlKey}});
    });
  {{/userRequiresPhoneAuth}}
</script>
</html>