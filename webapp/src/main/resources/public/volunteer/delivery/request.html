<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./request.css">
  <link rel="stylesheet" href="../../style.css">
  <script src="./request.js"></script>
  <title>Delivery Request</title>
  {{> header-include }}
</head>
<body>
  {{> header }}
  <h1> Request Page </h1>

  <main>
      <div id="verification-container">
        <form id="verification-form">
          <div>
            <h1> Verification Required </h1>
            <span class="errorMessage hidden" id="verification-error-msg"> ** Verification Error: Phone number is not associated with delivery request </span>
          </div>
          <div>
            <div>
              <label for="phone-verification">Phone Number: </label>
              <input type="tel" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" id="phone-verification" name="userPhone" required/>
            </div>
            <label for="phone-verification" class="italic" style="font-size:small">Format: 111-222-3333 </label>
        </div>
        <div style="display: flex;  flex-direction: row-reverse">
          <button>
            Submit
          </button>
        </div>
      </form>
    </div>


    <div class="" id="requestData" data-urlkey="{{urlKey}}">
      <div id="request-status-wrapper">
        <h1> Request Status: </h1>
        <div id="request-status">
          <div class="status" id="status-pending">
            <span class="status-text">Pending</span>
            <i class="fa-solid fa-check request-status-icon" style="color: #63E6BE;"></i>
          </div>

          <div class="status-divider"></div>

          <div class="status" id="status-accepted">
            <span class="status-text">Accepted</span>
            <i class="fa-solid fa-check request-status-icon" style="color: #63E6BE;"></i>
          </div>

          <div class="status-divider"></div>

          <div class="status" id="status-declined">
            <span class="status-text">Declined</span>
            <i class="fa-solid fa-check request-status-icon" style="color: #63E6BE;"></i>
          </div>

          <div class="status-divider"></div>

          <div class="status" id="status-cancelled">
            <span class="status-text">Cancelled</span>
            <i class="fa-solid fa-check request-status-icon" style="color: #63E6BE;"></i>
          </div>
        </div>
      </div>

    </div>
  </main>

</body>

<script>
  {{^userRequiresPhoneAuth}}
    window.addEventListener("load", () => {
      submitVerification({{userPhone}}, "{{urlKey}}");
    });
  {{/userRequiresPhoneAuth}}
</script>
</html>